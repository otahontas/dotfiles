# Add mailbox configs to chezmoi config file in $XDG_CONFIG_HOME/chezmoi with following
# structure:
# "aerc": {
#   "mailboxes": [
#     {
#       "name": <name of mailbox>,
#       "source": <imap address, see aerc man page>,
#       "password_name": <name of password in 1password>,
#       "outgoing": <smtp address, see aerc man page>,
#       "from": "Name <email>"
#     }
#   ]
# }
{{ range .aerc.mailboxes }}
[{{ .name }}]
source = {{ .source }}
source-cred-cmd = op item get "{{ .password_name }}" --fields label=password --format json | jq -r '.value'
outgoing = {{ .outgoing }}
outgoing-cred-cmd = op item get "{{ .password_name }}" --fields label=password --format json | jq -r '.value'
default = INBOX
copy-to = Sent
from = {{ .from }}
{{ end }}
